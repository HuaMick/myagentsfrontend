user_stories:
  # ============================================================================
  # BUILD & DEPLOYMENT User Stories
  # ============================================================================

  - id: US-BUILD-001
    name: "Flutter Web Build Success"
    category: "build"
    persona: "Developer building the app for deployment"
    priority: "critical"

    starting_state:
      environment:
        flutter_sdk: ">=3.0.0"
        dependencies_installed: false
        current_directory: "/home/code/myagents/MyAgentsFrontend"
      files_present:
        - "pubspec.yaml"
        - "lib/main.dart"
      knowledge:
        - "Developer wants to build for web"
        - "Developer has Flutter SDK installed"

    journey:
      - step: 1
        action: "Run flutter pub get"
        expected: "Dependencies install successfully"
        failure_indicators:
          - "Dependency resolution fails"
          - "Package not found errors"
          - "Version conflicts"

      - step: 2
        action: "Run flutter build web"
        expected: "Build completes without errors"
        failure_indicators:
          - "Compilation errors"
          - "Missing imports"
          - "Type errors"
          - "Asset failures"

      - step: 3
        action: "Verify build output exists"
        expected: "build/web directory contains index.html, main.dart.js"
        failure_indicators:
          - "Build directory missing"
          - "index.html missing"
          - "JavaScript bundle missing"

    success_criteria:
      - "flutter pub get succeeds"
      - "flutter build web succeeds"
      - "Build artifacts are generated"
      - "No compilation warnings (optional)"

    testing:
      web: true
      widget_test: false
      integration_test: false

    documentation_references:
      - "pubspec.yaml"
      - "README.md"

  - id: US-BUILD-002
    name: "Widget Tests Pass"
    category: "build"
    persona: "Developer running test suite"
    priority: "high"

    starting_state:
      environment:
        flutter_sdk: ">=3.0.0"
        dependencies_installed: true
        current_directory: "/home/code/myagents/MyAgentsFrontend"
      files_present:
        - "test/widget_test.dart"
      knowledge:
        - "Developer wants to verify tests pass"
        - "Tests should run without failures"

    journey:
      - step: 1
        action: "Run flutter test"
        expected: "All tests pass"
        failure_indicators:
          - "Test failures"
          - "Test exceptions"
          - "Missing test dependencies"

      - step: 2
        action: "Observe test output"
        expected: "Test summary shows all tests passed"
        failure_indicators:
          - "Failed tests in output"
          - "Skipped tests without reason"
          - "Timeout errors"

    success_criteria:
      - "All widget tests pass"
      - "No test exceptions"
      - "Test coverage on critical paths"

    testing:
      web: false
      widget_test: true
      integration_test: false

    documentation_references:
      - "test/widget_test.dart"

  - id: US-BUILD-003
    name: "Analyze Code Quality"
    category: "build"
    persona: "Developer checking code quality"
    priority: "medium"

    starting_state:
      environment:
        flutter_sdk: ">=3.0.0"
        dependencies_installed: true
        current_directory: "/home/code/myagents/MyAgentsFrontend"
      files_present:
        - "analysis_options.yaml"
      knowledge:
        - "Developer wants clean code"
        - "Project uses flutter_lints"

    journey:
      - step: 1
        action: "Run flutter analyze"
        expected: "Analysis completes with minimal or no issues"
        failure_indicators:
          - "Error-level issues"
          - "Critical lint failures"
          - "Analyzer crashes"

      - step: 2
        action: "Review any warnings"
        expected: "Warnings are minor or intentional"
        failure_indicators:
          - "Unused imports"
          - "Dead code warnings"
          - "Type inference issues"

    success_criteria:
      - "No error-level issues"
      - "Warnings are documented/acceptable"
      - "Code follows lint rules"

    testing:
      web: false
      widget_test: false
      integration_test: false

    documentation_references:
      - "analysis_options.yaml"
      - "pubspec.yaml"
